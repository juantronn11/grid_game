{% extends "base.html" %}
{% block title %}Admin: {{ game.name }}{% endblock %}
{% block content %}
<div class="admin-header">
    <h2>{{ game["name"] }}</h2>
    <div class="admin-info">
        <span class="badge">{{ claim_count }}/100 spots filled</span>
        {% if game["is_complete"] %}<span class="badge badge-green">COMPLETE</span>{% endif %}
    </div>
</div>

<div class="share-box">
    <strong>Share this link with players:</strong>
    <div class="share-url" id="shareUrl">{{ player_url }}</div>
    <button class="btn btn-small" onclick="navigator.clipboard.writeText(document.getElementById('shareUrl').textContent).then(()=>this.textContent='Copied!')">Copy Link</button>
    <span class="share-id">Game ID: <strong>{{ game_id }}</strong></span>
</div>

<div class="admin-actions">
    <a href="{{ url_for('admin_pdf', game_id=game_id) }}" class="btn btn-primary">Download PDF</a>
</div>

<div class="grid-wrapper">
    <table class="game-grid">
        <tr>
            <th class="corner-cell"></th>
            {% for num in col_numbers %}
            <th class="number-cell">{{ num }}</th>
            {% endfor %}
        </tr>
        {% for r in range(1, 11) %}
        <tr>
            <th class="number-cell">{{ row_numbers[r-1] }}</th>
            {% for c in range(1, 11) %}
            <td class="{% if grid[r][c] %}claimed{% else %}open{% endif %}">
                {% if grid[r][c] %}
                    <span class="player-name">{{ grid[r][c] }}</span>
                    <form method="post" action="{{ url_for('admin_remove', game_id=game_id) }}" class="remove-form">
                        <input type="hidden" name="row" value="{{ r }}">
                        <input type="hidden" name="col" value="{{ c }}">
                        <button type="submit" class="remove-btn" title="Remove">&times;</button>
                    </form>
                {% endif %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
