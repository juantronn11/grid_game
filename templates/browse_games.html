{% extends "base.html" %}
{% block title %}Browse Games{% endblock %}
{% block content %}
<div class="dash-header">
    <h2>Available Games</h2>
    <a href="{{ url_for('create_game') }}" class="btn btn-primary">+ Create Game</a>
</div>

{% if not games %}
<div class="card center-card">
    <p>No games available yet. Be the first to create one!</p>
</div>
{% else %}
<div class="game-cards">
    {% for g in games %}
    <div class="game-card">
        <div class="game-card-header">
            <h3>{{ g.name }}</h3>
            <span class="badge">{{ g.claim_count }}/100</span>
        </div>
        <div class="game-card-stats">
            <span>{{ g.team_x }} vs {{ g.team_y }}</span>
            {% if g.square_price %}
            <span>{{ g.square_price }}</span>
            {% endif %}
        </div>
        <div class="game-card-status">
            {% if g.locked %}
                <span class="badge badge-red">Closed</span>
            {% elif g.numbers_released %}
                <span class="badge badge-green">Numbers Released</span>
            {% else %}
                <span class="badge badge-green">Open</span>
            {% endif %}
        </div>
        <div class="game-card-actions">
            {% if g.already_joined %}
            <a href="{{ url_for('game_view', game_id=g.id) }}" class="btn btn-primary btn-small">View Grid</a>
            {% elif g.locked %}
            <span class="btn btn-disabled btn-small">Closed</span>
            {% else %}
            <a href="{{ url_for('join_game', game_id=g.id) }}" class="btn btn-primary btn-small">Join Game</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
